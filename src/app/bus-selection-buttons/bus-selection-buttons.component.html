<div class="bus-selection-container">

  <!-- Status Messages -->
  <div class="status-msg success" *ngIf="successMap.has(time) && successMap.get(time)?.[0]">
    <i class="bi bi-check-circle-fill"></i>
    <span>Passengers Allocated Successfully!</span>
    <span *ngIf="successMap.get(time)?.[1]" style="margin-left: 5px; font-weight: normal; font-size: 0.9em;">
      (Some groups split)
    </span>
  </div>

  <div class="status-msg error" *ngIf="successMap.has(time) && !successMap.get(time)?.[0]">
    <i class="bi bi-exclamation-triangle-fill"></i>
    <span>Error: Cannot allocate. Add buses or remove passengers.</span>
  </div>

  <!-- Bus Chips Grid -->
  <div class="bus-list-container">
    <div *ngFor="let bus of buses; trackBy: trackByBusId" class="bus-chip" [ngClass]="{
        'selected': isChecked(bus.busId),
        'disabled': isDisabled(bus.busId)
      }" (click)="toggleBus(bus.busId)">
      <span>{{ bus.busId }}</span>
      <i class="bi bi-check-lg check-icon" *ngIf="isChecked(bus.busId)"></i>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="button-container">
    <button type="button" class="action-btn btn-primary" (click)="sortPassengers($event)">Sort Passengers</button>
    <button type="button" class="action-btn btn-outline" (click)="selectAll($event)">Select All Buses</button>
    <button type="button" class="action-btn btn-outline" (click)="resetBuses($event)">Reset Buses</button>
  </div>

</div>